{
  "version": 3,
  "sources": ["../src/index.ts", "../../shared/src/index.ts", "../src/vnode.ts", "../src/sequence.ts", "../src/renderer.ts", "../src/h.ts"],
  "sourcesContent": ["export { createRenderer } from './renderer'\r\nexport { h } from './h'\r\n\r\nexport * from './vnode'\r\n", "export const isObject = function (value) {\r\n  return typeof value === 'object' && value !== null\r\n}\r\nexport const isString = value => {\r\n  return typeof value === 'string'\r\n}\r\nexport const isNumber = value => {\r\n  return typeof value === 'number'\r\n}\r\nexport const isFunction = value => {\r\n  return typeof value === 'function'\r\n}\r\n\r\nexport const isArray = Array.isArray\r\nexport const assign = Object.assign\r\n\r\n\r\nexport const enum ReactiveFlags {\r\n  IS_REACTIVE = '__v_isReactive',\r\n  IS_REF = '__v_isRef',\r\n}\r\n\r\n// vue3\u63D0\u4F9B\u7684\u5F62\u72B6\u6807\u8BC6\r\n// << \u5DE6\u79FB\u8FD0\u7B97\u7B26\uFF1A\u5404\u4E8C\u8FDB\u5236\u4F4D\u5168\u90E8\u5DE6\u79FB\u82E5\u5E72\u4F4D\uFF0C\u5DE6\u8FB9\u4E22\u5F03\uFF0C\u53F3\u8FB9\u88650\r\n// |  \u6309\u4F4D\u6216\u8FD0\u7B97\u7B26-\u6216\uFF1A\u4E24\u4F4D\u4E2D\u6709\u4E00\u4E2A\u4E3A1\uFF0C\u7ED3\u679C\u5C31\u4E3A1\r\n// &  \u6309\u4F4D\u4E0E\u8FD0\u7B97\u7B26-\u4E0E\uFF1A\u4E24\u4F4D\u540C\u65F6\u4E3A1\uFF0C\u7ED3\u679C\u624D\u4E3A1\uFF0C\u5426\u5219\u4E3A0\r\nexport const enum ShapeFlags {\r\n  ELEMENT = 1, // \u8868\u793A\u4E00\u4E2A\u666E\u901A\u7684HTML\u5143\u7D20\r\n  FUNCTIONAL_COMPONENT = 1 << 1, // \u51FD\u6570\u5F0F\u7EC4\u4EF6\r\n  STATEFUL_COMPONENT = 1 << 2, // \u6709\u72B6\u6001\u7EC4\u4EF6\r\n  TEXT_CHILDREN = 1 << 3, // \u5B50\u8282\u70B9\u662F\u6587\u672C\r\n  ARRAY_CHILDREN = 1 << 4, // \u5B50\u8282\u70B9\u662F\u6570\u7EC4\r\n  SLOTS_CHILDREN = 1 << 5, // \u5B50\u8282\u70B9\u662F\u63D2\u69FD\r\n  TELEPORT = 1 << 6, // \u8868\u793Avnode\u63CF\u8FF0\u7684\u662F\u4E2Ateleport\u7EC4\u4EF6\r\n  SUSPENSE = 1 << 7, // \u8868\u793Avnode\u63CF\u8FF0\u7684\u662F\u4E2Asuspense\u7EC4\u4EF6\r\n  COMPONENT_SHOULD_KEEP_ALIVE = 1 << 8, // \u8868\u793A\u9700\u8981\u88ABkeep-live\u7684\u6709\u72B6\u6001\u7EC4\u4EF6\r\n  COMPONENT_KEPT_ALIVE = 1 << 9, // \u5DF2\u7ECF\u88ABkeep-live\u7684\u6709\u72B6\u6001\u7EC4\u4EF6\r\n  COMPONENT = ShapeFlags.STATEFUL_COMPONENT | ShapeFlags.FUNCTIONAL_COMPONENT, // \u7EC4\u4EF6\uFF0C\u6709\u72B6\u6001\u7EC4\u4EF6\u548C\u51FD\u6570\u5F0F\u7EC4\u4EF6\u7684\u7EDF\u79F0\r\n}\r\n// \u56E0\u4E3A\u6211\u4EEC\u6BCF\u4E2A\u679A\u4E3E\u9879\u90FD\u662F2\u7684N\u6B21\u65B9\u503C\uFF0C\u6240\u4EE5\u4F4D\u8FD0\u7B97 & | \u5C31\u9002\u5408\u6743\u9650\u7684\u7EC4\u5408\uFF0Clet permissions = ADD | DELETE\r\n// &\u8FD0\u7B97\u7ED3\u679C\u4E3A0\uFF0C\u6CA1\u6709\u6B64\u6743\u9650\uFF0Cpermissions&UPDATE = 0\r\n// &\u8FD0\u7B97\u7ED3\u679C\u5927\u4E8E0\uFF0C\u6709\u6B64\u6743\u9650\uFF0Cpermissions&ADD > 0\r\n", "import { isArray, isString, ShapeFlags } from '@vue/shared'\r\n\r\nexport const Text = Symbol('Text')\r\n\r\nexport const Fragment = Symbol('Fragment')\r\n\r\n// \u5224\u65AD\u662F\u5426\u662F\u865A\u62DF\u8282\u70B9\r\nexport function isVnode(value) {\r\n  return !!(value && value.__v_isVnode)\r\n}\r\n\r\n// \u5224\u65AD\u4E24\u4E2A\u865A\u62DF\u8282\u70B9\u662F\u5426\u662F\u76F8\u540C\u8282\u70B9\uFF0C\u6807\u7B7E\u540D\u76F8\u540C && key\u662F\u4E00\u6837\u7684\r\nexport function isSameVnode(n1, n2) {\r\n  return n1.type === n2.type && n1.key === n2.key\r\n}\r\n\r\n// \u865A\u62DF\u8282\u70B9\u6709\u5F88\u591A\uFF1A\u7EC4\u4EF6\u7684\u3001\u5143\u7D20\u7684\u3001\u6587\u672C\u7684   h('h1')\u3001h('h1','hello')\u3001h('h1',[h('span')])\r\nexport function createVnode(type, props, children = null) {\r\n  // \u7EC4\u5408\u65B9\u6848\uFF0C\u6211\u60F3\u77E5\u9053\u4E00\u4E2A\u5143\u7D20\u4E2D\u5305\u542B\u7684\u662F\u591A\u4E2A\u513F\u5B50\u8FD8\u662F\u4E00\u4E2A\u513F\u5B50\uFF0C\u5229\u7528\u6807\u8BC6shapeFlag\r\n  // \u5982\u679Ctype\u662F\u5B57\u7B26\u4E32\uFF0C\u5219shapeFlag\u7F6E\u4E3A1\uFF0C\u4EE3\u8868\u662F\u5143\u7D20\uFF1B\u5426\u5219shapeFlag\u9ED8\u8BA4\u5148\u7F6E\u4E3A0\r\n  let shapeFlag = isString(type) ? ShapeFlags.ELEMENT : 0\r\n\r\n  // \u865A\u62DFdom\u5C31\u662F\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u540E\u7EEDdiff\u7B97\u6CD5\u3002 \u771F\u5B9Edom\u7684\u5C5E\u6027\u6BD4\u8F83\u591A\uFF0C\u4F7F\u7528\u771F\u5B9EDOM\u5BF9\u6BD4\u6027\u80FD\u4F1A\u5F88\u5DEE\r\n  const vnode = {\r\n    type,\r\n    props,\r\n    children,\r\n    el: null, // \u865A\u62DF\u8282\u70B9\u4E0A\u5BF9\u5E94\u7684\u771F\u5B9E\u8282\u70B9\uFF0C\u540E\u7EEDdiff\u7B97\u6CD5\r\n    key: props?.key,\r\n    __v_isVnode: true, // \u6807\u8BC6\u662F\u5426\u662F\u4E00\u4E2A\u865A\u62DFDOM\r\n    shapeFlag,\r\n  }\r\n\r\n  if (children) {\r\n    let type = 0\r\n    if (isArray(children)) {\r\n      // \u5B50\u8282\u70B9\u662F\u6570\u7EC4\r\n      type = ShapeFlags.ARRAY_CHILDREN\r\n    } else {\r\n      // \u5B50\u8282\u70B9\u662F\u6587\u672C\r\n      children = String(children)\r\n      type = ShapeFlags.TEXT_CHILDREN\r\n    }\r\n    vnode.shapeFlag = vnode.shapeFlag | type\r\n  }\r\n\r\n  return vnode\r\n}\r\n", "// \u8D2A\u5FC3\u7B97\u6CD5 + \u4E8C\u5206\u67E5\u627E\n\n// start@1**************************************************\n// 3 2 8 9 5 6 7 11 15 ->  \u6C42\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\u7684\u4E2A\u6570\n\n// 2 8 9 11 15 (\u4E0D\u662F\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217)\n// 2 5 6 7 11 15 (\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217)\n\n// \u627E\u66F4\u6709\u6F5C\u529B\u7684\n// 3\n// 2 \uFF082\u66FF\u6362\u63893\uFF09\n// 2 8\n// 2 8 9\n// 2 5 9 \uFF085\u66FF\u6362\u63898\uFF0C\u4E8C\u5206\u67E5\u627E\uFF0C\u627E\u5230\u7B2C\u4E00\u4E2A\u6BD45\u5927\u7684\u8FDB\u884C\u66FF\u6362\uFF09\uFF08\u4EC5\u5927\u4E8E\u5F53\u524D\u503C\u7684\uFF1A\u6240\u6709\u5927\u4E8E\u5F53\u524D\u503C\u7684\u7ED3\u679C\u4E2D\u7684\u6700\u5C0F\u503C\uFF09\n// 2 5 6 \uFF086\u66FF\u6362\u63899\uFF0C\u4E8C\u5206\u67E5\u627E\uFF0C\u627E\u5230\u7B2C\u4E00\u4E2A\u6BD46\u5927\u7684\u8FDB\u884C\u66FF\u6362\uFF09\uFF08\u4EC5\u5927\u4E8E\u5F53\u524D\u503C\u7684\uFF1A\u6240\u6709\u5927\u4E8E\u5F53\u524D\u503C\u7684\u7ED3\u679C\u4E2D\u7684\u6700\u5C0F\u503C\uFF09\n// 2 5 6 7 11 15 (\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217)\n// end@1**************************************************\n\n// start@2**************************************************\n// 3 2 8 9 5 6 7 11 15 4 ->  \u6C42\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\u7684\u4E2A\u6570\n\n// \u73B0\u5728\u6709\u4E2A\u95EE\u9898\uFF0C\u5982\u679C\u5E8F\u5217\u6700\u540E\u52A0\u4E00\u4E2A\u6570\u5B574\uFF0C\u6B64\u7B97\u6CD5\u6C42\u5F97\u7ED3\u679C\u4E3A 2 4 6 7 11 15\n// \u867D\u7136\u5E8F\u5217\u4E0D\u5BF9\uFF0C\u4F46\u662F\u5E8F\u5217\u957F\u5EA6\u662F\u6CA1\u95EE\u9898\u7684\n// 2 5 6 7 11 15\n// end@1**************************************************\n\n// 1.\u601D\u8DEF\u5C31\u662F\u5F53\u524D\u8FD9\u4E00\u9879\u6BD4\u6211\u4EEC\u6700\u540E\u4E00\u9879\u5927\u5219\u76F4\u63A5\u653E\u5230\u672B\u5C3E\n// 2.\u5982\u679C\u5F53\u524D\u8FD9\u4E00\u9879\u6BD4\u6700\u540E\u4E00\u9879\u5C0F\uFF0C\u9700\u8981\u5728\u5E8F\u5217\u4E2D\u901A\u8FC7\u4E8C\u5206\u67E5\u627E\u627E\u5230\u6BD4\u5F53\u524D\u5927\u7684\u8FD9\u4E00\u9879\uFF0C\u7528\u4ED6\u6765\u66FF\u6362\u6389\n// 3.\u524D\u9A71\u8282\u70B9\u8FFD\u6EAF\uFF0C\u66FF\u6362\u6389\u9519\u8BEF\u7684\u8282\u70B9\n\n// \u5B9E\u73B0\u601D\u8DEF1,2,3\nexport function getSequence(arr) {\n  const len = arr.length\n  const result = [0] // \u9ED8\u8BA4\u4EE5\u6570\u7EC4\u4E2D\u7B2C0\u4E2A\u4E3A\u57FA\u51C6\u6765\u505A\u5E8F\u5217\uFF0C\u6CE8\u610F\uFF01\uFF01\u5B58\u653E\u7684\u662F\u6570\u7EC4 \u7D22\u5F15\n  let resultLastIndex // \u7ED3\u679C\u96C6\u4E2D\u6700\u540E\u7684\u7D22\u5F15\n  let start\n  let end\n  let middle\n  const p = new Array(len).fill(0) // \u6700\u540E\u8981\u6807\u8BB0\u7D22\u5F15 \u653E\u7684\u4E1C\u897F\u4E0D\u7528\u5173\u5FC3\uFF0C\u4F46\u662F\u8981\u548C\u6570\u7EC4\u4E00\u6837\u957F\n\n  for (let i = 0; i < len; i++) {\n    let arrI = arr[i]\n    /** \u5F53\u524D\u8FD9\u4E00\u9879\u6BD4\u6211\u4EEC\u6700\u540E\u4E00\u9879\u5927\u5219\u76F4\u63A5\u653E\u5230\u672B\u5C3E */\n    if (arrI !== 0) {\n      // \u56E0\u4E3A\u5728vue newIndexToOldIndexMap \u4E2D\uFF0C0\u4EE3\u8868\u9700\u8981\u521B\u5EFA\u65B0\u5143\u7D20\uFF0C\u65E0\u9700\u8FDB\u884C\u4F4D\u7F6E\u79FB\u52A8\u64CD\u4F5C\n      resultLastIndex = result[result.length - 1]\n      if (arrI > arr[resultLastIndex]) {\n        // \u6BD4\u8F83\u5F53\u524D\u9879\u548C\u6700\u540E\u4E00\u9879\u7684\u503C\uFF0C\u5982\u679C\u5927\u4E8E\u6700\u540E\u4E00\u9879\uFF0C\u5219\u5C06\u5F53\u524D\u7D22\u5F15\u6DFB\u52A0\u5230\u7ED3\u679C\u96C6\u4E2D\n        result.push(i) // \u8BB0\u5F55\u7D22\u5F15\n        p[i] = resultLastIndex // \u5F53\u524D\u653E\u5230\u672B\u5C3E\u7684\u8981\u8BB0\u5F55\u4ED6\u524D\u9762\u7684\u7D22\u5F15\uFF0C\u7528\u4E8E\u8FFD\u6EAF\n        continue\n      }\n\n      /**\u8FD9\u91CC\u6211\u4EEC\u9700\u8981\u901A\u8FC7\u4E8C\u5206\u67E5\u627E\uFF0C\u5728\u7ED3\u679C\u96C6\u4E2D\u627E\u5230\u4EC5\u5927\u4E8E\u5F53\u524D\u503C\u7684\uFF08\u6240\u6709\u5927\u4E8E\u5F53\u524D\u503C\u7684\u7ED3\u679C\u4E2D\u7684\u6700\u5C0F\u503C\uFF09\uFF0C\u7528\u5F53\u524D\u503C\u7684\u7D22\u5F15\u5C06\u5176\u66FF\u6362\u6389 */\n      // \u9012\u589E\u5E8F\u5217 \u91C7\u7528\u4E8C\u5206\u67E5\u627E \u662F\u6700\u5FEB\u7684\n      start = 0\n      end = result.length - 1\n      while (start < end) {\n        // start === end\u7684\u65F6\u5019\u5C31\u505C\u6B62\u4E86  .. \u8FD9\u4E2A\u4E8C\u5206\u67E5\u627E\u5728\u627E\u7D22\u5F15\n        middle = ((start + end) / 2) | 0 // \u5411\u4E0B\u53D6\u6574\n        // 1 2 3 4 middle 6 7 8 9   6\n        if (arrI > arr[result[middle]]) {\n          start = middle + 1\n        } else {\n          end = middle\n        }\n      }\n      // \u627E\u5230\u4E2D\u95F4\u503C\u540E\uFF0C\u6211\u4EEC\u9700\u8981\u505A\u66FF\u6362\u64CD\u4F5C  start / end\n      if (arrI < arr[result[end]]) {\n        // \u8FD9\u91CC\u7528\u5F53\u524D\u8FD9\u4E00\u9879 \u66FF\u6362\u6389\u4EE5\u6709\u7684\u6BD4\u5F53\u524D\u5927\u7684\u90A3\u4E00\u9879\u3002 \u66F4\u6709\u6F5C\u529B\u7684\u6211\u9700\u8981\u4ED6\n        result[end] = i\n        p[i] = result[end - 1] // \u8BB0\u4F4F\u4ED6\u7684\u524D\u4E00\u4E2A\u4EBA\u662F\u8C01\n      }\n    }\n  }\n\n  // 1) \u9ED8\u8BA4\u8FFD\u52A0\u8BB0\u5F55\u524D\u9A71\u7D22\u5F15 p[i] = resultLastIndex\n  // 2) \u66FF\u6362\u4E4B\u540E\u8BB0\u5F55\u524D\u9A71\u7D22\u5F15 p[i] = result[end - 1]\n  // 3) \u8BB0\u5F55\u6BCF\u4E2A\u4EBA\u7684\u524D\u9A71\u8282\u70B9\n  // \u901A\u8FC7\u6700\u540E\u4E00\u9879\u8FDB\u884C\u56DE\u6EAF\n  let i = result.length\n  let last = result[i - 1] // \u627E\u5230\u6700\u540E\u4E00\u9879\n  while (i > 0) {\n    i--\n    // \u5012\u53D9\u8FFD\u6EAF\n    result[i] = last // \u6700\u540E\u4E00\u9879\u662F\u786E\u5B9A\u7684\n    last = p[last]\n  }\n  return result\n}\n", "import { ShapeFlags, isString } from '@vue/shared'\r\nimport { Text, Fragment, isSameVnode, createVnode } from './vnode'\r\nimport { getSequence } from './sequence'\r\n\r\nexport function createRenderer(renderOptions) {\r\n  let {\r\n    // \u589E\u52A0 \u5220\u9664 \u4FEE\u6539 \u67E5\u8BE2\r\n    insert: hostInsert,\r\n    remove: hostRemove,\r\n    setElementText: hostSetElementText,\r\n    setText: hostSetText,\r\n    parentNode: hostParentNode,\r\n    nextSibling: hostNextSibling,\r\n    createElement: hostCreateElement,\r\n    createText: hostCreateText,\r\n    patchProp: hostPatchProp,\r\n  } = renderOptions\r\n\r\n  // children[i] \u82E5\u662F\u5B57\u7B26\u4E32\uFF0C\u5219\u8F6C\u6362\u4E3A\u865A\u62DFDOM\uFF1B\u82E5\u662F\u865A\u62DFDOM\uFF0C\u5219\u4E0D\u505A\u5904\u7406\u76F4\u63A5\u8FD4\u56DE\r\n  // Text\uFF1A Symbol\u7C7B\u578B\u503C\uFF0C\u6807\u8BC6\u6587\u672C\u7C7B\u578B\u7684\u865A\u62DFDOM\r\n  const normalize = (children, i) => {\r\n    if (isString(children[i])) {\r\n      let vnode = createVnode(Text, null, children[i])\r\n      // \u5904\u7406\u540E\u8FDB\u884C\u66FF\u6362\uFF0C\u5378\u8F7D\u5143\u7D20\u65F6\u4F1A\u7528\u5230\r\n      children[i] = vnode\r\n    }\r\n    return children[i]\r\n  }\r\n\r\n  // \u9012\u5F52\u521D\u59CB\u5316\u5B50\u8282\u70B9\r\n  // children \u4E2D\u7684\u6BCF\u4E00\u9879\u90FD\u662F\u4E00\u4E2A\u865A\u62DFDOM\r\n  const mountChildren = (children, container) => {\r\n    for (let i = 0; i < children.length; i++) {\r\n      // \u5904\u7406children[i]\uFF0C\u5C06\u5B57\u7B26\u8F6C\u8F6C\u5316\u4E3A\u865A\u62DFDOM\r\n      let child = normalize(children, i)\r\n      patch(null, child, container)\r\n    }\r\n  }\r\n\r\n  // \u521D\u59CB\u5316DOM\r\n  const mountElement = (vnode, container, anchor) => {\r\n    const { type, props, shapeFlag } = vnode\r\n    // \u521B\u5EFA\u771F\u5B9E\u5143\u7D20\uFF0C\u6302\u8F7D\u5230\u865A\u62DF\u8282\u70B9\u4E0A\r\n    let el = (vnode.el = hostCreateElement(type))\r\n\r\n    if (props) {\r\n      for (const key in props) {\r\n        // \u66F4\u65B0\u5143\u7D20\u5C5E\u6027\r\n        hostPatchProp(el, key, null, props[key])\r\n      }\r\n    }\r\n\r\n    if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {\r\n      // children\u662F\u6587\u672C\r\n      hostSetElementText(el, vnode.children)\r\n    } else if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\r\n      // children\u662F\u6570\u7EC4-\u591A\u4E2A\u513F\u5B50\r\n      mountChildren(vnode.children, el)\r\n    }\r\n\r\n    // \u5C06el\u63D2\u5165\u5230container\u5BB9\u5668\u4E2D\r\n    hostInsert(el, container, anchor)\r\n  }\r\n\r\n  // \u5220\u9664\u6240\u6709\u7684\u5B50\u8282\u70B9\r\n  const unmountChildren = children => {\r\n    for (let i = 0; i < children.length; i++) {\r\n      unmount(children[i])\r\n    }\r\n  }\r\n\r\n  // \u5378\u8F7D\u8282\u70B9\r\n  const unmount = vnode => {\r\n    // \u5982\u679C\u662Ffragment\u5219\u5220\u9664\u5B50\u5143\u7D20\r\n    if (vnode.type === Fragment) {\r\n      return unmountChildren(vnode.children)\r\n    }\r\n    hostRemove(vnode.el)\r\n  }\r\n\r\n  // \u5904\u7406\u6587\u672C\uFF0C\u521D\u59CB\u5316\u6587\u672C\u548Cpatch\u6587\u672C\r\n  const processText = (n1, n2, container) => {\r\n    if (n1 === null) {\r\n      // \u521D\u59CB\u5316\u6587\u672C\r\n      const el = (n2.el = hostCreateText(n2.children))\r\n      hostInsert(el, container)\r\n    } else {\r\n      // patch\u6587\u672C\uFF0C\u6587\u672C\u7684\u5185\u5BB9\u53D8\u5316\u4E86\uFF0C\u6211\u53EF\u4EE5\u590D\u7528\u8001\u7684\u8282\u70B9\r\n      const el = (n2.el = n1.el)\r\n      if (n1.children !== n2.children) {\r\n        hostSetText(el, n2.children) // \u6587\u672C\u7684\u66F4\u65B0\r\n      }\r\n    }\r\n  }\r\n\r\n  // \u5904\u7406 Fragment\uFF0C\u521D\u59CB\u5316Fragment\u5B50\u5143\u7D20 \u548C patch Fragment\u5B50\u5143\u7D20\r\n  const processFragment = (n1, n2, container) => {\r\n    if (n1 == null) {\r\n      mountChildren(n2.children, container)\r\n    } else {\r\n      patchChildren(n1, n2, container) // \u8D70\u7684\u662Fdiff\u7B97\u6CD5\r\n    }\r\n  }\r\n\r\n  // \u5904\u7406\u5143\u7D20\uFF0C\u521D\u59CB\u5316\u5143\u7D20\u548Cpatch\u5143\u7D20\r\n  const processElement = (n1, n2, container, anchor) => {\r\n    if (n1 === null) {\r\n      // \u521D\u59CB\u5316\u5143\u7D20\r\n      mountElement(n2, container, anchor)\r\n    } else {\r\n      // patch\u5143\u7D20\r\n      patchElement(n1, n2)\r\n    }\r\n  }\r\n\r\n  // diff\u7B97\u6CD5\uFF1B\u5168\u91CF\u6BD4\u5BF9\uFF0C\u6BD4\u8F83\u4E24\u4E2A\u513F\u5B50\u6570\u7EC4\u7684\u5DEE\u5F02\r\n  const patchKeyedChildren = (c1, c2, container) => {\r\n    let i = 0\r\n    // \u7ED3\u5C3E\u4F4D\u7F6E\r\n    let e1 = c1.length - 1\r\n    let e2 = c2.length - 1\r\n\r\n    // \u7279\u6B8A\u5904\u7406\uFF0C\u5C3D\u53EF\u80FD\u51CF\u5C11\u6BD4\u5BF9\u5143\u7D20************************************\r\n    // sync from start \u4ECE\u5934\u90E8\u5F00\u59CB\u5904\u7406 O(n)\r\n    // (a b) c\r\n    // (a b) d e f\r\n    while (i <= e1 && i <= e2) {\r\n      // \u6709\u4EFB\u4F55\u4E00\u65B9\u505C\u6B62\u5FAA\u73AF\u5219\u76F4\u63A5\u8DF3\u51FA\r\n      const n1 = c1[i]\r\n      const n2 = c2[i]\r\n      // vnode type\u76F8\u540C && key\u76F8\u540C\r\n      if (isSameVnode(n1, n2)) {\r\n        patch(n1, n2, container) // \u8FD9\u6837\u505A\u5C31\u662F\u6BD4\u8F83\u4E24\u4E2A\u8282\u70B9\u7684\u5C5E\u6027\u548C\u5B50\u8282\u70B9\r\n      } else {\r\n        break\r\n      }\r\n      i++\r\n    }\r\n\r\n    // sync from end \u4ECE\u5C3E\u90E8\u5F00\u59CB\u5904\u7406 O(n)\r\n    //     a (b c)\r\n    // d e f (b c)\r\n    while (i <= e1 && i <= e2) {\r\n      const n1 = c1[e1]\r\n      const n2 = c2[e2]\r\n      if (isSameVnode(n1, n2)) {\r\n        patch(n1, n2, container)\r\n      } else {\r\n        break\r\n      }\r\n      e1--\r\n      e2--\r\n    }\r\n\r\n    // common sequence + mount \u540C\u5E8F\u5217\u52A0\u6302\u8F7D\r\n    // i\u8981\u6BD4e1\u5927\u8BF4\u660E\u6709\u65B0\u589E\u7684\uFF1Bi\u548Ce2\u4E4B\u95F4\u7684\u662F\u65B0\u589E\u7684\u90E8\u5206\r\n    // (a b)\r\n    // (a b) c d e\r\n    //       (b c)\r\n    // e d f (b c)\r\n    if (i > e1) {\r\n      if (i <= e2) {\r\n        while (i <= e2) {\r\n          const nextPos = e2 + 1\r\n          // \u6839\u636E\u4E0B\u4E00\u4E2A\u4EBA\u7684\u7D22\u5F15\u6765\u770B\u53C2\u7167\u7269\r\n          const anchor = nextPos < c2.length ? c2[nextPos].el : null\r\n          patch(null, c2[i], container, anchor) // \u521B\u5EFA\u65B0\u8282\u70B9 \u6254\u5230\u5BB9\u5668\u4E2D\r\n          i++\r\n        }\r\n      }\r\n    }\r\n\r\n    // common sequence + unmount \u540C\u5E8F\u5217\u52A0\u5378\u8F7D\r\n    // i\u6BD4e2\u5927\u8BF4\u660E\u6709\u8981\u5378\u8F7D\u7684\uFF1Bi\u5230e1\u4E4B\u95F4\u7684\u5C31\u662F\u8981\u5378\u8F7D\u7684\r\n    // (a b c) d e\r\n    // (a b c)\r\n    // e d (a b c)\r\n    //     (a b c)\r\n    else if (i > e2) {\r\n      if (i <= e1) {\r\n        while (i <= e1) {\r\n          unmount(c1[i])\r\n          i++\r\n        }\r\n      }\r\n    }\r\n\r\n    // \u4F18\u5316\u5B8C\u6BD5\uFF0C\u5C3D\u53EF\u80FD\u51CF\u5C11\u4E71\u5E8F\u6BD4\u5BF9\u7684\u8282\u70B9\u4E2A\u6570************************************\r\n    // unknown sequence \u4E71\u5E8F\u6BD4\u5BF9\r\n    // (a b) \u3010c d e w\u3011 (f g)\r\n    // (a b) \u3010e c d v\u3011 (f g)\r\n    let s1 = i\r\n    let s2 = i\r\n    const keyToNewIndexMap = new Map() // \u65B0\u8282\u70B9\u4E2D key -> newIndex \u7684 Map \u6620\u5C04\u8868\uFF0C\u5B50\u5143\u7D20\u4E2D\u5982\u679C\u5B58\u5728\u76F8\u540C\u7684key \u6216\u8005 \u6709\u591A\u4E2A\u5B50\u5143\u7D20\u6CA1\u6709key\uFF0C\u503C\u4F1A\u88AB\u540E\u9762\u7684\u7D22\u5F15\u8986\u76D6\r\n    for (let i = s2; i <= e2; i++) {\r\n      keyToNewIndexMap.set(c2[i].key, i)\r\n    }\r\n    const toBePatched = e2 - s2 + 1 // \u65B0\u7684\u8282\u70B9\u4E2D\u4E71\u5E8F\u6BD4\u5BF9\u603B\u4E2A\u6570\r\n    // \u4E00\u4E2A\u8BB0\u5F55\u662F\u5426\u6BD4\u5BF9\u8FC7\u7684\u6570\u7EC4\u6620\u5C04\u8868\uFF0C\u4F5C\u7528\uFF1A\u5DF2\u5BF9\u6BD4\u8FC7\u7684\u8282\u70B9\u9700\u79FB\u52A8\u4F4D\u7F6E\uFF1B\u672A\u5BF9\u6BD4\u8FC7\u7684\u8282\u70B9\u9700\u65B0\u521B\u5EFA\r\n    const newIndexToOldIndexMap = new Array(toBePatched).fill(0)\r\n    // \u5FAA\u73AF\u8001\u7684\u4E71\u5E8F\u8282\u70B9 \u770B\u4E00\u4E0B\u65B0\u7684\u4E71\u5E8F\u8282\u70B9\u91CC\u9762\u6709\u6CA1\u6709\uFF0C\u5982\u679C\u6709\u5219\u6BD4\u8F83\u5DEE\u5F02\uFF0C\u5982\u679C\u6CA1\u6709\u5219\u8981\u5220\u9664\u8001\u8282\u70B9\r\n    for (let i = s1; i <= e1; i++) {\r\n      const oldChild = c1[i] // \u8001\u7684\u8282\u70B9\r\n      let newIndex = keyToNewIndexMap.get(oldChild.key) // \u7528\u8001\u7684\u8282\u70B9\u53BB\u65B0\u7684\u91CC\u9762\u627E\r\n      if (newIndex == undefined) {\r\n        unmount(oldChild) // \u591A\u4F59\u8001\u8282\u70B9\u5220\u6389\r\n      } else {\r\n        // \u65B0\u7684\u4F4D\u7F6E\u5BF9\u5E94\u7684\u8001\u7684\u4F4D\u7F6E\uFF0C\u5982\u679C\u6570\u7EC4\u91CC\u653E\u7684\u503C >0 \u8BF4\u660E\u5DF2\u7ECFpactch\u8FC7\u4E86\u3002+1\u7684\u76EE\u7684\uFF1A\u9632\u6B62i\u4E3A0\r\n        newIndexToOldIndexMap[newIndex - s2] = i + 1 // \u7528\u6765\u6807\u8BB0\u5F53\u524D\u4E71\u5E8F\u8282\u70B9\u7D22\u5F15 \u5BF9\u5E94\u7684 \u5168\u90E8\u8001\u8282\u70B9\u7684\u52A01\u540E\u7684\u7D22\u5F15\uFF0C\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\u4F1A\u7528\u5230\r\n        patch(oldChild, c2[newIndex], container)\r\n      }\r\n    } // \u5230\u8FD9\u53EA\u662F\u65B0\u8001\u5C5E\u6027\u548C\u513F\u5B50\u7684\u6BD4\u5BF9 \u548C \u591A\u4F59\u8001\u8282\u70B9\u5378\u8F7D\u64CD\u4F5C\uFF0C\u6CA1\u6709\u79FB\u52A8\u4F4D\u7F6E\r\n\r\n    // \u83B7\u53D6\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\r\n    let increasingNewIndexSequence = getSequence(newIndexToOldIndexMap)\r\n    let j = increasingNewIndexSequence.length - 1\r\n    // \u9700\u8981\u79FB\u52A8\u4F4D\u7F6E\r\n    // \u4E71\u5E8F\u8282\u70B9\u9700\u8981\u79FB\u52A8\u4F4D\u7F6E\uFF0C\u5012\u5E8F\u904D\u5386\u4E71\u5E8F\u8282\u70B9\r\n    for (let i = toBePatched - 1; i >= 0; i--) {\r\n      let index = i + s2 // i\u662F\u4E71\u5E8F\u8282\u70B9\u4E2D\u7684index\uFF0C\u9700\u8981\u52A0\u4E0As2\u4EE3\u8868\u603B\u8282\u70B9\u4E2D\u7684index\r\n      let current = c2[index] // \u627E\u5230\u5F53\u524D\u8282\u70B9\r\n      let anchor = index + 1 < c2.length ? c2[index + 1].el : null\r\n      if (newIndexToOldIndexMap[i] === 0) {\r\n        // \u521B\u5EFA\u65B0\u5143\u7D20\r\n        patch(null, current, container, anchor)\r\n      } else {\r\n        if (!increasingNewIndexSequence.includes(i)) {\r\n          // \u4E0D\u662F0\uFF0C\u8BF4\u660E\u5DF2\u7ECF\u6267\u884C\u8FC7patch\u64CD\u4F5C\u4E86\r\n          hostInsert(current.el, container, anchor)\r\n        } else {\r\n          // \u8DF3\u8FC7\u4E0D\u9700\u8981\u79FB\u52A8\u7684\u5143\u7D20\uFF0C \u4E3A\u4E86\u51CF\u5C11\u79FB\u52A8\u64CD\u4F5C \u9700\u8981\u8FD9\u4E2A\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\u7B97\u6CD5\r\n          console.log('>>>>')\r\n        }\r\n\r\n        // if (i != increasingNewIndexSequence[j]) {\r\n        //   // \u4E0D\u662F0\uFF0C\u8BF4\u660E\u5DF2\u7ECF\u6267\u884C\u8FC7patch\u64CD\u4F5C\u4E86\r\n        //   hostInsert(current.el, container, anchor)\r\n        // } else {\r\n        //   // \u8DF3\u8FC7\u4E0D\u9700\u8981\u79FB\u52A8\u7684\u5143\u7D20\uFF0C \u4E3A\u4E86\u51CF\u5C11\u79FB\u52A8\u64CD\u4F5C \u9700\u8981\u8FD9\u4E2A\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\u7B97\u6CD5\r\n        //   console.log('>>>>')\r\n        //   j--\r\n        // }\r\n      }\r\n      // \u76EE\u524D\u65E0\u8BBA\u5982\u4F55\u90FD\u505A\u4E86\u4E00\u904D\u5012\u53D9\u63D2\u5165\uFF0C\u6027\u80FD\u6D6A\u8D39\uFF0C\u53EF\u4EE5\u6839\u636E\u521A\u624D\u7684\u6570\u7EC4newIndexToOldIndexMap\u6765\u51CF\u5C11\u63D2\u5165\u6B21\u6570\r\n      // \u7528\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\u6765\u5B9E\u73B0\uFF0Cvue3\u65B0\u589E\u7B97\u6CD5\uFF0Cvue2\u5728\u79FB\u52A8\u5143\u7D20\u7684\u65F6\u5019\u5219\u4F1A\u6709\u6027\u80FD\u6D6A\u8D39\r\n    }\r\n  }\r\n\r\n  // \u5BF9\u6BD4\u5C5E\u6027\u6253\u8865\u4E01\r\n  const patchProps = (oldProps, newProps, el) => {\r\n    for (let key in newProps) {\r\n      // \u65B0\u7684\u91CC\u9762\u6709\uFF0C\u76F4\u63A5\u7528\u65B0\u7684\u76D6\u6389\u5373\u53EF\r\n      hostPatchProp(el, key, oldProps[key], newProps[key])\r\n    }\r\n    for (let key in oldProps) {\r\n      // \u5982\u679C\u8001\u7684\u91CC\u9762\u6709\u65B0\u7684\u6CA1\u6709\uFF0C\u5219\u662F\u5220\u9664\r\n      if (newProps[key] == null) {\r\n        hostPatchProp(el, key, oldProps[key], undefined)\r\n      }\r\n    }\r\n  }\r\n\r\n  // \u5BF9\u6BD4\u5B50\u8282\u70B9\u6253\u8865\u4E01   el: \u865A\u62DF\u8282\u70B9\u5BF9\u5E94\u7684\u771F\u5B9EDOM\u5143\u7D20\r\n  const patchChildren = (n1, n2, el) => {\r\n    const c1 = n1.children\r\n    const c2 = n2.children\r\n    const prevShapeFlag = n1.shapeFlag // \u4E4B\u524D\u7684\r\n    const shapeFlag = n2.shapeFlag // \u4E4B\u540E\u7684\r\n\r\n    // \u6BD4\u8F83\u4E24\u4E2A\u513F\u5B50\u5217\u8868\u7684\u5DEE\u5F02\u4E86\r\n    // \u65B0\u513F\u5B50 \u65E7\u513F\u5B50\r\n    // \u6587\u672C  \u6570\u7EC4 \uFF08\u5220\u9664\u6240\u6709\u5B50\u8282\u70B9\uFF0C\u66F4\u65B0\u6587\u672C\u5185\u5BB9\uFF09\r\n    // \u6587\u672C  \u6587\u672C \uFF08\u66F4\u65B0\u6587\u672C\u5185\u5BB9\uFF09\r\n    // \u6587\u672C  \u7A7A   \uFF08\u66F4\u65B0\u6587\u672C\u5185\u5BB9\uFF09\r\n    // \u6570\u7EC4  \u6570\u7EC4 \uFF08diff\u7B97\u6CD5\uFF09\r\n    // \u6570\u7EC4  \u6587\u672C \uFF08\u6E05\u7A7A\u6587\u672C\uFF0C\u6302\u8F7D\u5143\u7D20\uFF09\r\n    // \u6570\u7EC4  \u7A7A   \uFF08\u6302\u8F7D\u5143\u7D20\uFF09\r\n    // \u7A7A    \u6570\u7EC4 \uFF08\u5220\u9664\u6240\u6709\u5B50\u8282\u70B9\uFF09\r\n    // \u7A7A    \u6587\u672C \uFF08\u6E05\u7A7A\u6587\u672C\uFF09\r\n    // \u7A7A    \u7A7A   \uFF08\u4E0D\u505A\u4EFB\u4F55\u5904\u7406\uFF09\r\n    if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {\r\n      if (prevShapeFlag & ShapeFlags.ARRAY_CHILDREN) {\r\n        // \u6587\u672C\t\u6570\u7EC4\t\uFF08\u5220\u9664\u6240\u6709\u5B50\u8282\u70B9\uFF0C\u66F4\u65B0\u6587\u672C\u5185\u5BB9\uFF09\r\n        unmountChildren(c1)\r\n      }\r\n      if (c1 !== c2) {\r\n        // \u6587\u672C\t\u6587\u672C\t| \u6587\u672C \u7A7A \uFF08\u66F4\u65B0\u6587\u672C\u5185\u5BB9\uFF09\r\n        hostSetElementText(el, c2)\r\n      }\r\n    } else if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\r\n      if (prevShapeFlag & ShapeFlags.ARRAY_CHILDREN) {\r\n        // \u6570\u7EC4 \u6570\u7EC4 \uFF08diff\u7B97\u6CD5\uFF1B\u5168\u91CF\u6BD4\u5BF9\uFF09\r\n        patchKeyedChildren(c1, c2, el)\r\n      } else {\r\n        if (prevShapeFlag & ShapeFlags.TEXT_CHILDREN) {\r\n          // \u6570\u7EC4 \u6587\u672C  \u6E05\u7A7A\u6587\u672C\uFF0C\u6302\u8F7D\u5143\u7D20\uFF09\r\n          hostSetElementText(el, '')\r\n        }\r\n        // \u6570\u7EC4 \u6587\u672C | \u6570\u7EC4 \u7A7A \uFF08\u6E05\u7A7A\u6587\u672C\uFF0C\u6302\u8F7D\u5143\u7D20\uFF09\r\n        mountChildren(c2, el)\r\n      }\r\n    } else {\r\n      // \u7A7A \u6570\u7EC4\r\n      if (prevShapeFlag & ShapeFlags.ARRAY_CHILDREN) {\r\n        unmountChildren(c1)\r\n      } else if (prevShapeFlag & ShapeFlags.TEXT_CHILDREN) {\r\n        // \u7A7A \u6587\u672C\r\n        hostSetElementText(el, '')\r\n      }\r\n    }\r\n  }\r\n\r\n  // \u5BF9\u6BD4\u5143\u7D20\u6253\u8865\u4E01\uFF0C\u5148\u590D\u7528\u8282\u70B9\u3001\u518D\u6BD4\u8F83\u5C5E\u6027\u3001\u518D\u6BD4\u8F83\u513F\u5B50\r\n  const patchElement = (n1, n2) => {\r\n    let el = (n2.el = n1.el)\r\n    let oldProps = n1.props || {} // \u5BF9\u8C61\r\n    let newProps = n2.props || {} // \u5BF9\u8C61\r\n\r\n    patchProps(oldProps, newProps, el)\r\n    patchChildren(n1, n2, el)\r\n  }\r\n\r\n  //  \u6838\u5FC3\u7684patch\u65B9\u6CD5\uFF0C\u5305\u62EC\u521D\u59CB\u5316DOM \u548C diff\u7B97\u6CD5\r\n  const patch = (n1, n2, container, anchor = null) => {\r\n    if (n1 == n2) return\r\n\r\n    // \u5224\u65AD\u4E24\u4E2A\u5143\u7D20\u662F\u5426\u76F8\u540C\uFF0C\u4E0D\u76F8\u540C\u5378\u8F7D\u5728\u6DFB\u52A0\r\n    if (n1 && !isSameVnode(n1, n2)) {\r\n      unmount(n1) // \u5220\u9664\u8001\u7684\r\n      n1 = null\r\n    }\r\n\r\n    const { type, shapeFlag } = n2\r\n    switch (type) {\r\n      case Text:\r\n        processText(n1, n2, container)\r\n        break\r\n      case Fragment: // \u65E0\u7528\u7684\u6807\u7B7E\r\n        processFragment(n1, n2, container)\r\n        break\r\n      default:\r\n        if (shapeFlag & ShapeFlags.ELEMENT) {\r\n          processElement(n1, n2, container, anchor)\r\n        }\r\n    }\r\n  }\r\n\r\n  const render = (vnode, container) => {\r\n    if (vnode == null) {\r\n      if (container._vnode) {\r\n        // \u4E4B\u524D\u6E32\u67D3\u8FC7\uFF0C\u5378\u8F7DDOM\r\n        unmount(container._vnode)\r\n      }\r\n    } else {\r\n      // \u521D\u59CB\u5316 \u548C \u66F4\u65B0DOM\r\n      patch(container._vnode || null, vnode, container)\r\n    }\r\n    // \u7F13\u5B58\u865A\u62DFDOM\uFF0C\u5C06\u5176\u6302\u8F7D\u5230\u5BB9\u5668\u4E0A\r\n    container._vnode = vnode\r\n  }\r\n  return {\r\n    render,\r\n  }\r\n}\r\n\r\n// 1) \u66F4\u65B0\u7684\u903B\u8F91\u601D\u8003\uFF1A\r\n// - \u5982\u679C\u524D\u540E\u5143\u7D20\u4E0D\u4E00\u81F4\uFF0C\u5220\u9664\u8001\u8282\u70B9 \u6DFB\u52A0\u65B0\u8282\u70B9\r\n// - \u5982\u679C\u524D\u540E\u5143\u7D20\u4E00\u81F4\uFF0C \u590D\u7528\u8282\u70B9\uFF1B \u518D\u6BD4\u8F83\u4E24\u4E2A\u5143\u7D20\u7684\u5C5E\u6027\u548C\u5B69\u5B50\u8282\u70B9\r\n", "import { isArray, isObject } from '@vue/shared'\r\nimport { createVnode, isVnode } from './vnode'\r\n\r\n// \u9664\u4E86 type \u5916\uFF0C\u5176\u4ED6\u53C2\u6570\u90FD\u662F\u53EF\u9009\u7684\r\n// h('div')\r\n// h('div', { id: 'foo', style: { color: 'red' } })\r\n\r\n// children \u53EF\u4EE5\u662F\u4E00\u4E2A\u5B57\u7B26\u4E32\r\n// h('div', { id: 'foo', style: { color: 'red' } }, 'hello')\r\n// \u591A\u4E2A children\r\n// h('div', { id: 'foo', style: { color: 'red' } }, 'hello', 'world')\r\n\r\n// h('div', null, 'hello', 'world')\r\n// h('div', h('span', 'hello'))\r\n// h('div', [h('span', 'hello')])\r\n\r\n// \u7B2C4\u4E2A\u3001\u7B2C5\u4E2A......\u53C2\u6570\u80AF\u5B9A\u4E5F\u662F\u5B69\u5B50\r\nexport function h(type, propsOrChildren, children) {\r\n  const len = arguments.length\r\n  // \u7B2C2\u4E2A\u53C2\u6570\u662F\u5C5E\u6027 \u6216\u8005 \u7B2C2\u4E2A\u53C2\u6570\u662Fchildren\r\n  if (len === 2) {\r\n    // 2\u4E2A\u53C2\u6570\r\n    // h('div', { style: { \"color\"\uFF1A \"red\"} })\r\n    // h('div', h('span'))\r\n    // h('div', [h('span'), h('span')] )\r\n    // h('div', 'hello')\r\n    // \u4E3A\u4EC0\u4E48\u8981\u5C06\u513F\u5B50\u5305\u88C5\u6210\u6570\u7EC4\uFF0C\u56E0\u4E3A\u5143\u7D20\u53EF\u4EE5\u5FAA\u73AF\u521B\u5EFA\u3002 \u6587\u672C\u5C31\u4E0D\u9700\u8981\u5305\u88C5\u6210\u6570\u7EC4\u4E86\r\n    if (isObject(propsOrChildren) && !isArray(propsOrChildren)) {\r\n      if (isVnode(propsOrChildren)) {\r\n        // \u865A\u62DF\u8282\u5C31\u5305\u88C5\u6210\u6570\u7EC4\r\n        return createVnode(type, null, [propsOrChildren]) // \u5355\u4E2A\u865A\u62DF\u8282\u70B9\r\n      }\r\n      return createVnode(type, propsOrChildren) // \u5C5E\u6027\r\n    } else {\r\n      return createVnode(type, null, propsOrChildren) // \u591A\u4E2A\u865A\u62DF\u8282\u70B9\u6570\u7EC4 \u6216 \u6587\u672C\r\n    }\r\n  } else {\r\n    if (len > 3) {\r\n      // \u517C\u5BB9\u591A\u4E2Achildren\u7684\u60C5\u51B5\u3001\r\n      children = Array.from(arguments).slice(2)\r\n    } else if (len === 3 && isVnode(children)) {\r\n      // h('div', {}, h('span'))\r\n      children = [children] // \u5305\u88C5\u6210\u6570\u7EC4\r\n    }\r\n    // \u5176\u4ED6\r\n    return createVnode(type, propsOrChildren, children) // children\u7684\u60C5\u51B5\u6709\u4E24\u79CD \u6587\u672C / \u6570\u7EC4\r\n  }\r\n}\r\n"],
  "mappings": "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",
  "names": ["type", "i", "i"]
}
